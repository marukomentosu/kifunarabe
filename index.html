<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Shogi Board - htmlマン２</title>
    <style>
        :root {
            --board-color: #e6b422; /* 榧（かや）色 */
            --line-color: #2c3e50;
            --cell-size: clamp(30px, 8vw, 60px);
            --label-size: 20px;
            --piece-stand-bg: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0; background: #1a1a1a; color: #fff;
            font-family: "Sawarabi Mincho", serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        /* 全体コンテナ */
        #shogi-app {
            display: flex; flex-direction: column; align-items: center; gap: 20px;
            padding: 20px;
        }

        /* 駒台と盤面のレイアウト */
        .game-layout {
            display: flex; align-items: flex-start; gap: 15px;
        }

        /* 駒台（駒木箱） */
        .piece-stand {
            width: calc(var(--cell-size) * 2.5);
            min-height: calc(var(--cell-size) * 4);
            background: #8b4513; /* 木箱の色 */
            border: 2px solid #5d2e0a;
            border-radius: 4px; padding: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .stand-label { font-size: 0.8rem; border-bottom: 1px solid rgba(255,255,255,0.2); margin-bottom: 8px; }

        /* 盤面本体の外枠（符号表示用） */
        .board-wrapper {
            position: relative; padding: var(--label-size);
            background: var(--board-color);
            border-radius: 2px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8), inset 0 0 50px rgba(0,0,0,0.1);
        }

        /* 符号（数字・漢数字） */
        .coords-x {
            position: absolute; top: 0; left: var(--label-size);
            display: flex; width: calc(var(--cell-size) * 9);
            justify-content: space-around; color: #000; font-weight: bold;
        }
        .coords-y {
            position: absolute; right: 0; top: var(--label-size);
            display: flex; flex-direction: column; height: calc(var(--cell-size) * 9);
            justify-content: space-around; color: #000; font-weight: bold;
        }

        /* 盤のグリッド（9x9） */
        .shogi-grid {
            display: grid; grid-template-columns: repeat(9, var(--cell-size));
            grid-template-rows: repeat(9, var(--cell-size));
            border: 1px solid var(--line-color);
        }

        .cell {
            border: 0.5px solid var(--line-color);
            display: flex; align-items: center; justify-content: center;
            font-size: calc(var(--cell-size) * 0.7); color: #000;
            position: relative; cursor: pointer;
        }

        /* 駒の描画 */
        .piece {
            user-select: none; transition: transform 0.1s;
            font-weight: bold;
        }
        .piece.gote { transform: rotate(180deg); color: #222; }

        /* 装飾：星（盤上の4つの点） */
        .cell.star::after {
            content: ''; position: absolute; width: 6px; height: 6px;
            background: var(--line-color); border-radius: 50%;
            z-index: 1; pointer-events: none;
        }
        .cell.star-tl::after { bottom: -3px; right: -3px; }
        .cell.star-tr::after { bottom: -3px; left: -3px; }
        .cell.star-bl::after { top: -3px; right: -3px; }
        .cell.star-br::after { top: -3px; left: -3px; }

    </style>
</head>
<body>

<div id="shogi-app">
    <div class="game-layout">
        <div class="piece-stand" id="stand-gote">
            <div class="stand-label">△ 後手 駒台</div>
            <div id="gote-hand-content"></div>
        </div>

        <div class="board-wrapper">
            <div class="coords-x" id="coords-x"></div>
            <div class="coords-y" id="coords-y"></div>
            
            <div class="shogi-grid" id="board">
                </div>
        </div>

        <div class="piece-stand" id="stand-sente">
            <div class="stand-label">▲ 先手 駒台</div>
            <div id="sente-hand-content"></div>
        </div>
    </div>

    <div id="info">
        <h3 id="current-move-display">初期局面</h3>
    </div>
</div>

<script>
class ShogiBoardRenderer {
    constructor() {
        this.boardEl = document.getElementById('board');
        this.coordsX = document.getElementById('coords-x');
        this.coordsY = document.getElementById('coords-y');
        this.init();
    }

    init() {
        // 1. 符号の生成
        const xLabels = ['9','8','7','6','5','4','3','2','1'];
        const yLabels = ['一','二','三','四','五','六','七','八','九'];
        
        xLabels.forEach(l => {
            const div = document.createElement('div');
            div.innerText = l; div.style.width = "var(--cell-size)";
            div.style.textAlign = "center";
            this.coordsX.appendChild(div);
        });

        yLabels.forEach(l => {
            const div = document.createElement('div');
            div.innerText = l; div.style.height = "var(--cell-size)";
            div.style.display = "flex"; div.style.alignItems = "center";
            this.coordsY.appendChild(div);
        });

        // 2. 盤面セルの生成
        for (let i = 0; i < 81; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            
            // 星（四隅の点）の配置
            if (i === 20) cell.classList.add('star', 'star-tl');
            if (i === 24) cell.classList.add('star', 'star-tr');
            if (i === 56) cell.classList.add('star', 'star-bl');
            if (i === 60) cell.classList.add('star', 'star-br');

            cell.dataset.index = i;
            this.boardEl.appendChild(cell);
        }

        this.setupInitialPosition();
    }

    setupInitialPosition() {
        const initial = {
            0: {type: '香', color: 'gote'}, 1: {type: '桂', color: 'gote'}, 2: {type: '銀', color: 'gote'},
            3: {type: '金', color: 'gote'}, 4: {type: '王', color: 'gote'}, 5: {type: '金', color: 'gote'},
            6: {type: '銀', color: 'gote'}, 7: {type: '桂', color: 'gote'}, 8: {type: '香', color: 'gote'},
            10: {type: '飛', color: 'gote'}, 16: {type: '角', color: 'gote'},
            18: {type: '歩', color: 'gote'}, 19: {type: '歩', color: 'gote'}, 20: {type: '歩', color: 'gote'},
            21: {type: '歩', color: 'gote'}, 22: {type: '歩', color: 'gote'}, 23: {type: '歩', color: 'gote'},
            24: {type: '歩', color: 'gote'}, 25: {type: '歩', color: 'gote'}, 26: {type: '歩', color: 'gote'},
            
            54: {type: '歩', color: 'sente'}, 55: {type: '歩', color: 'sente'}, 56: {type: '歩', color: 'sente'},
            57: {type: '歩', color: 'sente'}, 58: {type: '歩', color: 'sente'}, 59: {type: '歩', color: 'sente'},
            60: {type: '歩', color: 'sente'}, 61: {type: '歩', color: 'sente'}, 62: {type: '歩', color: 'sente'},
            64: {type: '角', color: 'sente'}, 70: {type: '飛', color: 'sente'},
            72: {type: '香', color: 'sente'}, 73: {type: '桂', color: 'sente'}, 74: {type: '銀', color: 'sente'},
            75: {type: '金', color: 'sente'}, 76: {type: '玉', color: 'sente'}, 77: {type: '金', color: 'sente'},
            78: {type: '銀', color: 'sente'}, 79: {type: '桂', color: 'sente'}, 80: {type: '香', color: 'sente'},
        };

        const cells = document.querySelectorAll('.cell');
        Object.keys(initial).forEach(idx => {
            const p = initial[idx];
            const span = document.createElement('span');
            span.className = `piece ${p.color}`;
            span.innerText = p.type;
            cells[idx].appendChild(span);
        });
    }
}

const renderer = new ShogiBoardRenderer();
</script>
</body>
</html>
